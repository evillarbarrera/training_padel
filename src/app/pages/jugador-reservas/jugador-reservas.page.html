<ion-content>

  <!-- HEADER ESTILO NIKE -->
  <div class="header-nike">
    <div class="header-overlay"></div>
    <div class="header-content">
      <h1 class="header-title">Agenda tu Clase</h1>
      <p class="header-sub">Reserva la clase disponible</p>
    </div>
  </div>

  <!-- FILTRO POR ENTRENADOR -->
  <div class="filter-container">
    <ion-item>
      <ion-label>Filtrar por Entrenador</ion-label>
      <ion-select
        placeholder="Selecciona entrenador"
        (ionChange)="onEntrenadorChange()"
        [(ngModel)]="selectedEntrenador">
        <ion-select-option
          *ngFor="let entrenador of entrenadores"
          [value]="entrenador.id" >
          {{ entrenador.nombre }}
        </ion-select-option>
      </ion-select>
    </ion-item>
  </div>

<ion-segment
  class="dias-segment"
  [(ngModel)]="diaSeleccionado"
  scrollable>

  <ion-segment-button
    *ngFor="let d of dias"
    [value]="d">

    <ion-label>
      {{ d | date:'EEE dd' }}
    </ion-label>

  </ion-segment-button>

</ion-segment>


<ion-segment
  class="tramos-segment"
  [(ngModel)]="tramoSeleccionado" scrollable>

  <ion-segment-button value="manana">
    <ion-label>â˜€ï¸ MAÃ‘ANA</ion-label>
  </ion-segment-button>

  <ion-segment-button value="tarde">
    <ion-label>ğŸŒ¤ï¸ TARDE</ion-label>
  </ion-segment-button>

  <ion-segment-button value="noche">
    <ion-label>ğŸŒ™ NOCHE</ion-label>
  </ion-segment-button>

</ion-segment>

<div
  class="horarios-grid"
  *ngIf="
    diaSeleccionado &&
    horariosPorDia[diaSeleccionado] &&
    horariosPorDia[diaSeleccionado][tramoSeleccionado]
  ">

  <div
    class="horario-card"
    *ngFor="let h of horariosPorDia[diaSeleccionado][tramoSeleccionado]"
    [class.ocupado]="h.ocupado">

    <!-- HORA -->
    <div class="hora">
      {{ h.hora_inicio | date:'HH:mm' }} â€“ {{ h.hora_fin | date:'HH:mm' }}
    </div>

    <!-- ESTADO -->
    <div class="estado" *ngIf="h.ocupado">
      â›” No disponible
    </div>

    <!-- BOTÃ“N -->
    <ion-button
      expand="block"
      size="small"
      [disabled]="h.ocupado"
      [color]="h.ocupado ? 'medium' : 'dark'"
      (click)="reservarHorario(h)">

      {{ h.ocupado ? 'Ocupado' : 'Reservar clase' }}

    </ion-button>

  </div>
</div>


<ion-text
  color="medium"
  *ngIf="
    diaSeleccionado &&
    horariosPorDia[diaSeleccionado] &&
    horariosPorDia[diaSeleccionado][tramoSeleccionado] &&
    !horariosPorDia[diaSeleccionado][tramoSeleccionado].length
  ">
  <p class="ion-text-center ion-padding">
    No hay horarios disponibles en este tramo
  </p>
</ion-text>

<ion-button fill="clear" class="btn-volver" (click)="goToHome()">
 <!-- <ion-icon src="/assets/icon/chevron-left-svgrepo-com.svg"></ion-icon> -->
  <ion-icon name="chevron-back-outline"></ion-icon>
</ion-button>

</ion-content>
